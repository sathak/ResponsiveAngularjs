
<div class="row">
    <div class="col-md-12">
        <navcon-portlet title="Security" navcon-data="vm" class="" icon="" type="userAccessRights" tools-disp="">
            <navcon-form navcon-data="vm" footer='' field-data="vm.userAccessRightsFields" type="userAccessRights" form-manage="vm.formManage" ng-if="vm.userAccessRightsFields!=undefined">
                <div class="form-group row">
                    <input type="text" id="rightsForm" ng-hide="true" />
                    <navcon-field label-class="col-md-2 col-md-pull-1" field-class="col-md-3 col-md-pull-1" field-key="RoleId"></navcon-field>
                    <navcon-button class="btn btn-success center" icon="fa fa-list" text="Show" ng-click="vm.showRights()"></navcon-button>
                    <navcon-button class="btn btn-primary center" icon="fa fa-undo" text="Reset" ng-click="vm.reset()" ng-if="vm.showReset"></navcon-button>
                </div>
                <div class="pull-right statusdiv" style="display: block;">
                    <ul class="nav navbar-right panel_toolbox" style="margin-top: 0px !important;">                       
                        <li data-toggle="tooltip" title="History" data-original-title="History" ng-if="vm.showHistory">
                            <a class="close-link" ng-click="HistoryChanges()"><i class="fa fa-history"></i></a>
                        </li>
                    </ul>
                </div>
                <div class="collapse center" id="User">
                    <div class="">
                        <navcon-tree field-set="userAccessRightsFields" options="options" navcon-data="vm" type="userAccessRights" tree-settings="vm.userAccessRightsTree" is-expand="true">
                        </navcon-tree>
                    </div>
                    <div class="form-group row; col-md-12 text-center">
                        <div class="form-group row">
                            &nbsp;
                        </div>
                        <navcon-button class="btn btn-primary center" icon="fa fa-floppy-o" text="Save" ng-if="!vm.isSave && vm.rights.Edit" ng-click="vm.formManage.save('Save')"></navcon-button>
                        <navcon-button class="btn btn-primary center" icon="fa fa-floppy-o" text="Update" ng-if="!vm.isUpdate && vm.rights.Edit" ng-click="vm.formManage.save('Update')"></navcon-button>
                    </div>
                </div>
            </navcon-form>
        </navcon-portlet>
    </div>
</div>

<!--History With Data-->
<navcon-modal navcon-data="this" title="{{HistoryTitle}}" icon="fa fa-info-circle" id="review" footer="" size="navcon-modal-xs">
    <navcon-form navcon-data="this" field-data="vm.userAccessRightsHistoryFields" footer='' type="review" form-manage="formManage" ng-if="vm.userAccessRightsHistoryFields!=undefined">
        <div class="form-group row">
            <navcon-history navcon-data="this" ng-if="isHistory"></navcon-history>
        </div>
        <div class="form-group row" ng-if="historyState=='Save'">
            <navcon-field field-key="HistoryRemarks" label-class="col-md-2" field-class="col-md-8"></navcon-field>
        </div>
        <div class="form-grow row" style="padding:5px;" ng-if="historyState=='Save'">
            <navcon-field field-key="ITARWarning" label-class="" field-class="col-md-push-1 col-md-10 IncreaseWidth"></navcon-field>
        </div>
        <br />
        <div class="form-group row" style="text-align:right;" ng-if="historyState=='Save'">
            <navcon-button icon="fa fa-floppy-o" class="btn btn-primary no-margin-left" text="Save" ng-click="saveChanges();" ng-disabled="!historyItarWarning"></navcon-button>
            <navcon-button icon="fa fa-stop" class="btn btn-default no-margin-right" text="Cancel" ng-click="cancel('review');"></navcon-button>
        </div>
    </navcon-form>
</navcon-modal>

<!--History With No-Data-->
<navcon-modal navcon-data="this" title="{{HistoryTitle}}" icon="fa fa-info-circle" id="notFound" footer="" size="navcon-modal-xs">
    <div class="form-group row">
        <h4>No Changes Found</h4>
    </div>
</navcon-modal>