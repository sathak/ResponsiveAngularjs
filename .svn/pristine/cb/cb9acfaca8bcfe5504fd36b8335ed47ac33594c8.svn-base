<div>
    <div class="clearfix visible-lg-block visible-md-block visible-sm-block margin-bottom-10" />
    <button class="btn" aria-expanded="false" ng-click="toggleFilter('advfilter')">
        Advanced Filter
        <i class="fa fa-filter" aria-hidden="true"></i>
    </button>

    <div class="collapse" id="advfilter" aria-expanded="true">

        <navcon-form navcon-data="this" field-data="vm.filterFields" footer='' form-manage="formManage"
                     ng-if="vm.filterFields!=undefined">
            <div class="form-group row">
                <div>
                    <navcon-field field-key="projects" label-class="col-md-2"
                                  field-class="col-md-3"></navcon-field>
                </div>
                <div>
                    <navcon-field field-key="bases" label-class="col-md-2"
                                  field-class="col-md-3"></navcon-field>
                </div>
            </div>


            <div class="form-group row">
                <div>
                    <navcon-field field-key="department" label-class="col-md-2"
                                  field-class="col-md-3"></navcon-field>
                </div>

                <div>
                    <navcon-field field-key="role" label-class="col-md-2"
                                  field-class="col-md-3"></navcon-field>
                </div>
            </div>
            <div class="form-group row">
                <div>
                    <navcon-field field-key="fullname" label-class="col-md-2"
                                  field-class="col-md-3"></navcon-field>
                </div>
            </div>

            <div class="form-group row">
                <div>
                    <navcon-field field-key="edaTrained" label-class="col-md-2"
                                  field-class="col-md-3"></navcon-field>
                </div>
                <div>
                    <navcon-field field-key="userStatus" label-class="col-md-2"
                                  field-class="col-md-3"></navcon-field>
                </div>
            </div>
           
            
            <div style="width:55%;clear:left;">
                <div>
                    <button class="btn btn-primary" style="margin-left: 10px;float:right;" ng-click="Resetfilter()">
                        Reset <i class="fa fa-undo"
                                 aria-hidden="true"></i>
                    </button>
                </div>
                <div>
                    <button class="btn  btn-success" type="button" data-toggle="tooltip" title=""
                            ng-click="applyfilter()" style="margin-left: 10px;float:right;"
                            data-original-title="Search ">
                        Search <i class="fa fa-filter"
                                  aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </navcon-form>

        
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <navcon-portlet title="User Management" navcon-data="vm" class="" icon="" type="usermanagement" tools-disp="">
            <navcon-table table-settings="vm.userManagementTable" type="usermanagement" navcon-data="vm" css-class="rowPointer"></navcon-table>
            <navcon-button class="btn btn-primary center" icon="fa fa-plus" text="Add New User" ng-if="vm.rights.Add" ng-click="vm.showHide('User','add')"></navcon-button>
            <div class="form-group row">
                &nbsp;
            </div>
            <div class="pull-right statusdiv" style="display: block;" ng-if="vm.readOnly">
                <ul class="nav navbar-right panel_toolbox" style="margin-top: 0px !important;">
                    <li data-toggle="tooltip" title="Edit" data-original-title="Edit" ng-if="vm.rights.Edit && !vm.isEdit">
                        <a class="collapse-link" ng-click="vm.edit();">
                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                        </a>
                    </li>
                    <li data-toggle="tooltip" title="History" data-original-title="History" ng-if="vm.showHistory">
                        <a class="close-link" ng-click="HistoryChanges()"><i class="fa fa-history"></i></a>
                    </li>
                </ul>
            </div>
            <div class="collapse center" id="User">
                <div class="form-group row">
                    &nbsp;
                </div>                
                <div class="well">
                    <navcon-form navcon-data="vm" footer='' field-data="vm.userManagementFields" type="usermanagement" form-manage="vm.formManage" ng-if="vm.userManagementFields!=undefined" read-only="vm.readOnly">
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="BaseId"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="DepartmentId"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="ClockNumber"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="UserName"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="FirstName"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="MiddleName"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="LastName"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="PhoneNumber"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="Email"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="ProjectUser"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="Roles"></navcon-field>
                        </div>
                        <div class="form-group row">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="EDATrained"></navcon-field>
                        </div>
                        <div class="form-group row" ng-if="vm.showUserStatus">
                            <navcon-field label-class="col-md-3" field-class="col-md-6" field-key="UserStatusId"></navcon-field>
                        </div>
                        <!--<div class="form-group row; col-md-12 text-center" ng-hide="vm.isITAR">
                            <navcon-field field-key="ITARWarning" label-class="" field-class="col-md-12 IncreaseWidth"></navcon-field>
                        </div>-->
                    </navcon-form>
                </div>
                <div class="form-group row; col-md-12 text-center">
                    <div class="form-group row">
                        &nbsp;
                    </div>
                    <!--<navcon-button class="btn btn-primary center" icon="fa fa-pencil" text="Edit" ng-if="vm.readOnly && vm.rights.Edit" ng-click="vm.edit()" ng-hide="vm.isEdit"></navcon-button>-->
                    <navcon-button class="btn btn-primary center" icon="fa fa-floppy-o" text="Save" ng-click="vm.formManage.save('Save')" ng-hide="vm.isSave"></navcon-button>
                    <navcon-button class="btn btn-primary center" icon="fa fa-floppy-o" ng-if="!vm.readOnly && vm.rights.Edit" text="Update" ng-click="vm.formManage.save('Update')" ng-hide="vm.isUpdate"></navcon-button>
                    <!--<navcon-button class="btn btn-danger center" icon="fa fa-trash" text="Delete" ng-if="vm.readOnly && vm.rights.Delete" ng-click="vm.delete()" ng-hide="vm.isDelete"></navcon-button>-->
                    <navcon-button class="btn btn-warning center" icon="fa fa-stop" text="Cancel" ng-if="!vm.readOnly" ng-click="vm.cancel()" ng-hide="vm.isCancel"></navcon-button>
                </div>
            </div>
        </navcon-portlet>
    </div>
</div>

<navcon-modal navcon-data="vm" field-data="" title="User" icon="" id="UserDeleteModal" footer='Yes|No' size="navcon-modal-sm" overflow="hide">
    <navcon-form navcon-data="vm" footer='' field-data="" type="UserDeleteModal" size="navcon-modal-xs">
        <div>
            <h2 style="text-align:center">Are you sure you want to delete this user?</h2>
        </div>
        <hr />
        <button style="float:right;" type="button" class="btn btn-danger" ng-click="vm.closePopup('UserDeleteModal','No')">No</button>
        <button style="float:right;" type="button" class="btn btn-success" ng-click="vm.closePopup('UserDeleteModal','Yes')">Yes</button>
    </navcon-form>
</navcon-modal>

<!--History With Data-->
<navcon-modal navcon-data="this" title="{{HistoryTitle}}" icon="fa fa-info-circle" id="review" footer="" size="navcon-modal-xs">
    <navcon-form navcon-data="this" field-data="vm.userManagementHistoryFields" footer='' type="review" form-manage="formManage" ng-if="vm.userManagementHistoryFields!=undefined">
        <div class="form-group row">
            <navcon-history navcon-data="this" ng-if="isHistory"></navcon-history>
        </div>
        <div class="form-group row" ng-if="historyState=='Save'">
            <navcon-field field-key="HistoryRemarks" label-class="col-md-2" field-class="col-md-8"></navcon-field>
        </div>
        <div class="form-grow row" style="padding:5px;" ng-if="historyState=='Save'">
            <navcon-field field-key="ITARWarning" label-class="" field-class="col-md-push-1 col-md-10 IncreaseWidth"></navcon-field>
        </div>
        <br />
        <div class="form-group row" style="text-align:right;" ng-if="historyState=='Save'">
            <navcon-button icon="fa fa-floppy-o" class="btn btn-primary no-margin-left" text="Save" ng-click="saveChanges();" ng-disabled="!historyItarWarning"></navcon-button>
            <navcon-button icon="fa fa-stop" class="btn btn-default no-margin-right" text="Cancel" ng-click="cancel('review');"></navcon-button>
        </div>
    </navcon-form>
</navcon-modal>

<!--History With No-Data-->
<navcon-modal navcon-data="this" title="{{HistoryTitle}}" icon="fa fa-info-circle" id="notFound" footer="" size="navcon-modal-xs">
    <div class="form-group row">
        <h4>No Changes Found</h4>
    </div>
</navcon-modal>
