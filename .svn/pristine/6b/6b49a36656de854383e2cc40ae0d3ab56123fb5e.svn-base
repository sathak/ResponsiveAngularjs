/*global describe, it, beforeEach, inject, expect*/
(function() {
    'use strict';

    describe('Userprofile Controller', function() {
        var _userProfileController, scope, _pageConfig, _dataservice, _$http, _$httpBackend;
        var returnedJSON = {};

        // Load the modules
        beforeEach(module('LocalStorageModule'));
        beforeEach(module('app'));
        beforeEach(module('app.core'));
        beforeEach(module('blocks.logger'));
        beforeEach(module('blocks.exception'));
        beforeEach(module('app.userprofile'));

        beforeEach(inject(function($controller, $rootScope, dataservice, $http, $httpBackend) {
            scope = $rootScope.$new();
            _dataservice = dataservice;
            _$http = $http;
            _$httpBackend = $httpBackend;

            _userProfileController = $controller('userprofile', {
                $scope: scope,
                pageConfig: _pageConfig
            });
        }));

        afterEach(function() {
            _$httpBackend.verifyNoOutstandingExpectation();
            _$httpBackend.verifyNoOutstandingRequest();
        });

        describe('userprofile', function() {

            beforeEach(function(done) {
                var pageConfigJSON = readJSON('clientFields/administration/userProfileConfig.json');
                console.log(pageConfigJSON);
                //_$httpBackend.expectGET("http://1.0.0.82/RMSBuildServices/api/Generic/GetPageConfiguration?Page=administration&type=userprofileConfig").respond({});
                //_dataservice.getServerData("userProfileConfig").then(function(result) {
                //pageConfig = navcon.jsonTransformed(result);
                //    done();
                //});
                //_$httpBackend.flush();
            });

            // Test some basic expectations about the controller
            it('should have userId defined', function() {
                expect(_userProfileController.userId).toBeDefined();
            });

        });
    });
}());